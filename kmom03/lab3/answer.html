<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Lab 3 - functions</title>
<style>
html {
    overflow-y: scroll;
}

body {
    margin: 8px auto;
    max-width: 700px;
}

h2 {
    line-height: 2.5em;
    border-bottom: 1px solid #aaa;
}

h3 {
    line-height: 2.5em;
    border-bottom: 1px solid #ccc;
}

p {
    margin-bottom: 22px;
}

div.answer {
  font-family: "Courier New", monospace;
  white-space: pre;
  margin-bottom: 1em;
}

.fail {
    color: red;
}

.success {
    color: green;
}

.nopass {
    color: olive;
}

.pass {
    color: green;
}

.passdistinct {
    color: DarkGoldenRod;
}
table, th, td {
    border: 1px solid #666;
}

code {
    background-color: #eee;
    border: 1px solid #999;
    padding: 1px;
    font-size: larger;
}

pre code {
    display: block;
    background-color: #eee;
    border: none;
    border-left: 2px solid #999;
    padding: 0.5em;
    margin-bottom: 22px;
}
</style>
</head>
<body>

<pre>
75efafdd8de8e167ba07933bf27443e8
javascript1
lab3
v2
fraa18
2018-11-21 11:44:02
v3.1.3 (2018-09-13)
</pre>

<p><i>Generated 2018-11-21 12:44:02 by <a href="https://github.com/dbwebb-se/lab">dbwebb lab-utility</a> v3.1.3 (2018-09-13).</i></p>
<hr>

<h1>Lab 3 - functions</h1>
<p>Solve the exercises in the file <code>answer.js</code> and reload this file to see the outcome. Check the development console for errors and use it for your own debugging.</p>

<div id="answer1.1" class="answer"></div>
<div id="answer1.2" class="answer"></div>
<div id="answer1.3" class="answer"></div>
<div id="answer1.4" class="answer"></div>
<div id="answer1.5" class="answer"></div>
<div id="answer1.6" class="answer"></div>
<div id="answer1.7" class="answer"></div>
<div id="answer1.8" class="answer"></div>
<div id="answer1.9" class="answer"></div>
<div id="answer1.10" class="answer"></div>
<div id="answer2.1" class="answer"></div>
<div id="answer2.2" class="answer"></div>
<div id="answer2.3" class="answer"></div>

<p id="summary"></p>

<hr>
<code>75efafdd8de8e167ba07933bf27443e8</code>

<script type="text/javascript">

Array.prototype.equals = function (array) {
    // if the other array is a falsy value, return
    if (!array)
        return false;

    // compare lengths - can save a lot of time
    if (this.length != array.length)
        return false;

    for (var i = 0, l = this.length; i < l; i++) {
        // Check if we have nested arrays
        if (this[i] instanceof Array && array[i] instanceof Array) {
            // recurse into the nested arrays
            if (!this[i].equals(array[i]))
                return false;
        }
        else if (this[i] !== array[i]) {
            // Warning - two different object instances will never be equal: {x:20} != {x:20}
            return false;
        }
    }
    return true;
};

window.dbwebb = {

    "answers": {
    "points": {
        "1.1": 1,
        "1.2": 1,
        "1.3": 1,
        "1.4": 1,
        "1.5": 1,
        "1.6": 1,
        "1.7": 1,
        "1.8": 1,
        "1.9": 1,
        "1.10": 1,
        "2.1": 3,
        "2.2": 3,
        "2.3": 3
    },
    "answers": {
        "1.1": 3240,
        "1.2": "yellow",
        "1.3": "24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42",
        "1.4": "42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24",
        "1.5": "24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42",
        "1.6": "whitewhitewhitewhitewhitewhitewhitewhitewhitewhitewhitewhitewhitewhite",
        "1.7": true,
        "1.8": false,
        "1.9": 5.5327,
        "1.10": "4,Buzz,Fizz,7,8,Fizz,Buzz,11,Fizz,13,14,Fizz Buzz,16,17,Fizz,19,Buzz,Fizz",
        "2.1": "Player: 28, Dealer: 20",
        "2.2": "Player: busted, Dealer: stop",
        "2.3": 1743.8835
    },
    "summary": {
        "questions": 13,
        "points": 19,
        "pass": 10,
        "passdistinct": 19
    }
},
    "correct": 0,
    "failed": 0,
    "notDone": 0,
    "points": 0,

    "arrayCheck": function (answer1, answer2) {
        if (answer1 instanceof Array && answer2 instanceof Array) {
            return answer1.equals(answer2);
        }
        return false;
    },

    "assert": function (question, answer, hint) {
        var element = document.getElementById("answer" + question),
            status,
            noanswer = "Replace this text with the variable holding the answer.";

        hint = hint || false;

        if (answer === noanswer) {
            status = question + " NOT YET DONE.";
            window.dbwebb.notDone += 1;
        } else if (answer === this.answers.answers[question]
                   || this.arrayCheck(answer, this.answers.answers[question])) {
            status = question + " CORRECT. Well done!\n" + JSON.stringify(answer) + " (" + typeof answer + ")";
            window.dbwebb.correct += 1;
            window.dbwebb.points += this.answers.points[question];
        } else {
            status = question + " FAIL.\nYou said:\n" + JSON.stringify(answer) + " (" + typeof answer + ")";
            if (hint) {
                status += "\nHint:\n" + JSON.stringify(this.answers.answers[question]) + " (" + typeof this.answers.answers[question] + ")";
            }
            window.dbwebb.failed += 1;
        }

        console.log(status);
        element.innerHTML = status;
    },

    "exitWithSummary": function() {
        var element = document.getElementById("summary");
        var status;
        var questions = window.dbwebb.answers.summary.questions;
        var pass = window.dbwebb.answers.summary.pass;
        var passDistinct = window.dbwebb.answers.summary.passdistinct;
        var didPass;
        var didPassDistinct;

        status  = "Done with status ";
        status += Object.keys(window.dbwebb.answers.answers).length;
        status += "/";
        status += window.dbwebb.correct;
        status += "/";
        status += window.dbwebb.failed;
        status += "/";
        status += window.dbwebb.notDone;
        status += " (Total/Correct/Failed/Not done).<br><br>";
        status += "Points earned: ";
        status += window.dbwebb.points;
        status += " of ";
        status += window.dbwebb.answers.summary.points;
        status += "p ";
        status += " (PASS=>";
        status += window.dbwebb.answers.summary.pass;
        status += "p";
        if (window.dbwebb.answers.summary.passdistinct) {
            status += ", PASS W DISTINCTION=>";
            status += window.dbwebb.answers.summary.passdistinct;
            status += "p";
        }
        status += ").<br><br>";

        // Check if pass, pass w distinction or not
        var didPass = window.dbwebb.correct === questions;
        if (pass) {
            didPass = window.dbwebb.points >= pass;
        }

        didPassDistinct = null;
        if (passDistinct) {
            didPassDistinct = window.dbwebb.points >= passDistinct;
        }

        if (didPassDistinct) {
            status += "<span class='passdistinct'>Grade: PASS WITH DISTINCTION!!! :-D</span>";
        } else if (didPass) {
            status += "<span class='pass'>Grade: PASS! :-)</span>";
        } else {
            status += "<span class='nopass'>Grade: Thou Did Not Pass. :-|</span>";
        }

        console.log(status);
        element.innerHTML = status;
    }
};

</script>
<script src="answer.js" type="text/javascript"></script>

</body>
</html>
